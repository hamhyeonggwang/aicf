# νμΌ κµ¬μ΅° μ„¤λ…

Google Apps Script ν”„λ΅μ νΈμ νμΌ κµ¬μ΅°μ™€ κ° νμΌμ μ—­ν• μ„ μ„¤λ…ν•©λ‹λ‹¤.

## π“ νμΌ κµ¬μ΅°

```
google-apps-script/
β”β”€β”€ Code.gs                    # λ©”μΈ μ§„μ…μ  (HTTP μ”μ²­ μ²λ¦¬)
β”β”€β”€ ICFCodes.gs                # ICF μ½”λ“ λ°μ΄ν„°λ² μ΄μ¤
β”β”€β”€ OpenAIService.gs            # OpenAI API νΈμ¶ λ΅μ§
β”β”€β”€ Handlers.gs                 # κ° μ—”λ“ν¬μΈνΈ ν•Έλ“¤λ¬
β”β”€β”€ appsscript.json            # ν”„λ΅μ νΈ μ„¤μ • νμΌ
β”β”€β”€ README.md                   # λ°°ν¬ κ°€μ΄λ“
β”β”€β”€ CLIENT_INTEGRATION.md      # ν”„λ΅ νΈμ—”λ“ ν†µν•© κ°€μ΄λ“
β””β”€β”€ FILE_STRUCTURE.md          # μ΄ νμΌ
```

## π“„ κ° νμΌμ μ—­ν• 

### Code.gs (λ©”μΈ μ§„μ…μ )
- **μ—­ν• **: HTTP μ”μ²­μ„ λ°›μ•„μ„ μ μ ν• ν•Έλ“¤λ¬λ΅ λΌμ°ν…
- **μ£Όμ” ν•¨μ**:
  - `doGet()`: GET μ”μ²­ μ²λ¦¬ (ν…μ¤νΈμ©)
  - `doPost()`: POST μ”μ²­ μ²λ¦¬ (λ©”μΈ API)
  - `doOptions()`: CORS preflight μ”μ²­ μ²λ¦¬
  - `setCorsHeaders()`: CORS ν—¤λ” μ„¤μ •

### ICFCodes.gs (λ°μ΄ν„°λ² μ΄μ¤)
- **μ—­ν• **: ICF μ½”λ“ μ •λ³΄λ¥Ό μ €μ¥ν•κ³  κ΄€λ¦¬
- **μ£Όμ” ν•¨μ**:
  - `getAllCodes()`: λ¨λ“  ICF μ½”λ“ λ°ν™
  - `getCodesByDomain()`: λ„λ©”μΈλ³„ μ½”λ“ λ°ν™
  - `getCodeInfo()`: νΉμ • μ½”λ“ μ •λ³΄ λ°ν™
  - `generateICFCodesContext()`: ν”„λ΅¬ν”„νΈμ© μ»¨ν…μ¤νΈ μƒμ„±

### OpenAIService.gs (API μ„λΉ„μ¤)
- **μ—­ν• **: OpenAI API νΈμ¶μ„ μ²λ¦¬ν•λ” κ³µν†µ ν•¨μ
- **μ£Όμ” ν•¨μ**:
  - `callOpenAI()`: OpenAI API νΈμ¶ λ° μ‘λ‹µ νμ‹±

### Handlers.gs (μ”μ²­ ν•Έλ“¤λ¬)
- **μ—­ν• **: κ° μ—”λ“ν¬μΈνΈμ λΉ„μ¦λ‹μ¤ λ΅μ§ μ²λ¦¬
- **μ£Όμ” ν•¨μ**:
  - `handleMatch()`: ICF μ½”λ“ λ§¤μΉ­ μ²λ¦¬
  - `handleScoreRecommendation()`: μ μ μ¶”μ² μ²λ¦¬
  - `handleInterventionRecommendation()`: μ¤‘μ¬ μ¶”μ² μ²λ¦¬

### appsscript.json (μ„¤μ • νμΌ)
- **μ—­ν• **: ν”„λ΅μ νΈ λ©”νƒ€λ°μ΄ν„° λ° κ¶ν• μ„¤μ •
- **λ‚΄μ©**: νƒ€μ„μ΅΄, λ°νƒ€μ„ λ²„μ „, OAuth μ¤μ½”ν”„ λ“±

## π”„ μ‹¤ν–‰ νλ¦„

```
1. ν΄λΌμ΄μ–ΈνΈ β†’ POST μ”μ²­
   β†“
2. Code.gs β†’ doPost() ν•¨μ μ‹¤ν–‰
   β†“
3. Code.gs β†’ endpointμ— λ”°λΌ ν•Έλ“¤λ¬ μ„ νƒ
   β†“
4. Handlers.gs β†’ ν•΄λ‹Ή ν•Έλ“¤λ¬ ν•¨μ μ‹¤ν–‰
   β†“
5. Handlers.gs β†’ ICFCodes.gsμ ν•¨μ νΈμ¶ (λ°μ΄ν„° ν•„μ” μ‹)
   β†“
6. Handlers.gs β†’ OpenAIService.gsμ callOpenAI() νΈμ¶
   β†“
7. OpenAIService.gs β†’ OpenAI API νΈμ¶
   β†“
8. μ‘λ‹µμ΄ μ—­μμΌλ΅ μ „λ‹¬λμ–΄ ν΄λΌμ΄μ–ΈνΈλ΅ λ°ν™
```

## π’΅ μ™ νμΌμ„ λ¶„λ¦¬ν–λ‚μ”?

### μ¥μ 
1. **κ°€λ…μ„±**: κ° νμΌμ΄ λ…ν™•ν• μ—­ν• μ„ κ°€μ§
2. **μ μ§€λ³΄μ**: νΉμ • κΈ°λ¥ μμ • μ‹ ν•΄λ‹Ή νμΌλ§ μμ •
3. **μ¬μ‚¬μ©μ„±**: κ³µν†µ ν•¨μλ¥Ό μ—¬λ¬ κ³³μ—μ„ μ‚¬μ© κ°€λ¥
4. **ν…μ¤νΈ**: κ° λ¨λ“μ„ λ…λ¦½μ μΌλ΅ ν…μ¤νΈ κ°€λ¥

### λ‹¨μΌ νμΌ vs λ¨λ“ν™”
- **λ‹¨μΌ νμΌ (Code.gsλ§)**: κ°„λ‹¨ν• ν”„λ΅μ νΈμ— μ ν•©, λ°°ν¬κ°€ μ‰¬μ›€
- **λ¨λ“ν™” (ν„μ¬ κµ¬μ΅°)**: λ³µμ΅ν• ν”„λ΅μ νΈμ— μ ν•©, μ μ§€λ³΄μκ°€ μ‰¬μ›€

## π“ νμΌ μ¶”κ°€ μ‹ μ£Όμμ‚¬ν•­

1. Google Apps Scriptλ” λ¨λ“  `.gs` νμΌμ„ μλ™μΌλ΅ λ΅λ“ν•©λ‹λ‹¤
2. ν•¨μλ” μ „μ—­ μ¤μ½”ν”„μ— μμΌλ―€λ΅ νμΌ κ°„ μμ λ΅­κ² νΈμ¶ κ°€λ¥ν•©λ‹λ‹¤
3. νμΌ μ΄λ¦„μ€ μ•νλ²³ μμ„λ΅ μ •λ ¬λμ§€λ§, μ‹¤ν–‰ μμ„λ” μ¤‘μ”ν•μ§€ μ•μµλ‹λ‹¤
4. `doGet`, `doPost`, `doOptions` κ°™μ€ νΉμ ν•¨μλ” ν•λ‚λ§ μμ–΄μ•Ό ν•©λ‹λ‹¤

## π”§ νμΌ μμ • κ°€μ΄λ“

### ICF μ½”λ“ μ¶”κ°€
β†’ `ICFCodes.gs` νμΌμ `ICF_CODES` κ°μ²΄μ— μ¶”κ°€

### API μ—”λ“ν¬μΈνΈ μ¶”κ°€
1. `Handlers.gs`μ— μƒ ν•Έλ“¤λ¬ ν•¨μ μ¶”κ°€
2. `Code.gs`μ `doPost()` ν•¨μμ— μƒ μΌ€μ΄μ¤ μ¶”κ°€

### OpenAI API λ΅μ§ λ³€κ²½
β†’ `OpenAIService.gs`μ `callOpenAI()` ν•¨μ μμ •

### CORS μ„¤μ • λ³€κ²½
β†’ `Code.gs`μ `setCorsHeaders()` ν•¨μ μμ •

